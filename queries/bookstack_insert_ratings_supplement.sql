-- =====================================================
-- SUPPLEMENTARY INSERT SCRIPT
-- Add default ratings for all books without ratings
-- Run this AFTER bookstack_insert.sql
-- =====================================================

USE bookstack;

-- Add default ratings for books that currently have no ratings
-- Using members 1,2,3,7,8,11,12 to create realistic rating distribution

INSERT INTO book_rating (book_id, user_id, rating, rating_date) VALUES
-- Book 2: Eat That Frog (avg 4.3)
(2, 1, 5, '2026-02-03 09:00:00'),
(2, 2, 4, '2026-02-03 10:15:00'),
(2, 3, 4, '2026-02-03 11:30:00'),

-- Book 3: Rich Dad Poor Dad (avg 4.7)
(3, 7, 5, '2026-02-03 09:30:00'),
(3, 8, 5, '2026-02-03 10:45:00'),
(3, 11, 4, '2026-02-03 12:00:00'),

-- Book 5: Grit (avg 4.5)
(5, 1, 5, '2026-02-03 09:15:00'),
(5, 12, 4, '2026-02-03 10:30:00'),

-- Book 6: Man's Search for Meaning (avg 5.0)
(6, 2, 5, '2026-02-03 09:45:00'),
(6, 3, 5, '2026-02-03 11:00:00'),
(6, 7, 5, '2026-02-03 12:15:00'),

-- Book 7: Mindset (avg 4.7)
(7, 8, 5, '2026-02-03 10:00:00'),
(7, 11, 4, '2026-02-03 11:15:00'),
(7, 12, 5, '2026-02-03 12:30:00'),

-- Book 8: The Power of Habit (avg 4.8)
(8, 1, 5, '2026-02-03 10:15:00'),
(8, 2, 5, '2026-02-03 11:30:00'),
(8, 3, 4, '2026-02-03 12:45:00'),

-- Book 9: How to Win Friends (avg 4.5)
(9, 7, 5, '2026-02-03 10:30:00'),
(9, 8, 4, '2026-02-03 11:45:00'),

-- Book 10: Think and Grow Rich (avg 4.3)
(10, 11, 4, '2026-02-03 10:45:00'),
(10, 12, 5, '2026-02-03 12:00:00'),
(10, 1, 4, '2026-02-03 13:15:00'),

-- Book 12: The Miracle Morning (avg 4.7)
(12, 2, 5, '2026-02-03 11:00:00'),
(12, 3, 4, '2026-02-03 12:15:00'),
(12, 7, 5, '2026-02-03 13:30:00'),

-- Book 13: Deep Work (avg 4.8)
(13, 8, 5, '2026-02-03 11:15:00'),
(13, 11, 5, '2026-02-03 12:30:00'),
(13, 12, 4, '2026-02-03 13:45:00'),

-- Book 14: The One Thing (avg 4.7)
(14, 1, 5, '2026-02-03 11:30:00'),
(14, 2, 4, '2026-02-03 12:45:00'),
(14, 3, 5, '2026-02-03 14:00:00'),

-- Book 16: Can't Hurt Me (avg 4.5)
(16, 7, 5, '2026-02-03 11:45:00'),
(16, 8, 4, '2026-02-03 13:00:00'),

-- Book 18: Daring Greatly (avg 4.7)
(18, 11, 5, '2026-02-03 12:00:00'),
(18, 12, 5, '2026-02-03 13:15:00'),
(18, 1, 4, '2026-02-03 14:30:00'),

-- Book 22: Start With Why (avg 4.8)
(22, 2, 5, '2026-02-03 12:15:00'),
(22, 3, 5, '2026-02-03 13:30:00'),
(22, 7, 4, '2026-02-03 14:45:00'),

-- Book 23: 12 Rules for Life (avg 4.3)
(23, 8, 4, '2026-02-03 12:30:00'),
(23, 11, 5, '2026-02-03 13:45:00'),
(23, 12, 4, '2026-02-03 15:00:00'),

-- Book 24: Richest Man in Babylon (avg 4.7)
(24, 1, 5, '2026-02-03 12:45:00'),
(24, 2, 4, '2026-02-03 14:00:00'),
(24, 3, 5, '2026-02-03 15:15:00'),

-- Book 25: Outliers (avg 4.8)
(25, 7, 5, '2026-02-03 13:00:00'),
(25, 8, 5, '2026-02-03 14:15:00'),
(25, 11, 4, '2026-02-03 15:30:00'),

-- Book 26: Extreme Ownership (avg 4.7)
(26, 12, 5, '2026-02-03 13:15:00'),
(26, 1, 4, '2026-02-03 14:30:00'),
(26, 2, 5, '2026-02-03 15:45:00'),

-- Book 27: Shoe Dog (avg 4.8)
(27, 3, 5, '2026-02-03 13:30:00'),
(27, 7, 5, '2026-02-03 14:45:00'),
(27, 8, 4, '2026-02-03 16:00:00'),

-- Book 28: Zero to One (avg 4.7)
(28, 11, 5, '2026-02-03 13:45:00'),
(28, 12, 4, '2026-02-03 15:00:00'),
(28, 1, 5, '2026-02-03 16:15:00'),

-- Book 29: The Alchemist (avg 4.5)
(29, 2, 5, '2026-02-03 14:00:00'),
(29, 3, 4, '2026-02-03 15:15:00'),

-- Book 30: Make Your Bed (avg 4.3)
(30, 7, 4, '2026-02-03 14:15:00'),
(30, 8, 5, '2026-02-03 15:30:00'),
(30, 11, 4, '2026-02-03 16:45:00'),

-- Book 31: The Tools (avg 4.0)
(31, 12, 4, '2026-02-03 14:30:00'),
(31, 1, 4, '2026-02-03 15:45:00'),

-- Book 32: The Compound Effect (avg 4.7)
(32, 2, 5, '2026-02-03 14:45:00'),
(32, 3, 4, '2026-02-03 16:00:00'),
(32, 7, 5, '2026-02-03 17:15:00'),

-- Book 33: The Slight Edge (avg 4.5)
(33, 8, 5, '2026-02-03 15:00:00'),
(33, 11, 4, '2026-02-03 16:15:00'),

-- Book 34: Tools of Titans (avg 4.8)
(34, 12, 5, '2026-02-03 15:15:00'),
(34, 1, 5, '2026-02-03 16:30:00'),
(34, 2, 4, '2026-02-03 17:45:00'),

-- Book 35: 4-Hour Workweek (avg 4.3)
(35, 3, 4, '2026-02-03 15:30:00'),
(35, 7, 5, '2026-02-03 16:45:00'),
(35, 8, 4, '2026-02-03 18:00:00'),

-- Book 36: Gifts of Imperfection (avg 4.7)
(36, 11, 5, '2026-02-03 15:45:00'),
(36, 12, 4, '2026-02-03 17:00:00'),
(36, 1, 5, '2026-02-03 18:15:00'),

-- Book 37: Quiet (avg 4.5)
(37, 2, 5, '2026-02-03 16:00:00'),
(37, 3, 4, '2026-02-03 17:15:00'),

-- Book 38: Ikigai (avg 4.8)
(38, 7, 5, '2026-02-03 16:15:00'),
(38, 8, 5, '2026-02-03 17:30:00'),
(38, 11, 4, '2026-02-03 18:45:00'),

-- Book 39: Subtle Art (avg 4.3)
(39, 12, 4, '2026-02-03 16:30:00'),
(39, 1, 5, '2026-02-03 17:45:00'),
(39, 2, 4, '2026-02-03 19:00:00'),

-- Book 40: You Are a Badass (avg 4.5)
(40, 3, 5, '2026-02-03 16:45:00'),
(40, 7, 4, '2026-02-03 18:00:00'),

-- Book 41: The Mountain Is You (avg 4.7)
(41, 8, 5, '2026-02-03 17:00:00'),
(41, 11, 4, '2026-02-03 18:15:00'),
(41, 12, 5, '2026-02-03 19:30:00'),

-- Book 102: Thinking Fast and Slow (avg 4.8)
(102, 1, 5, '2026-02-04 09:00:00'),
(102, 2, 5, '2026-02-04 10:15:00'),
(102, 3, 4, '2026-02-04 11:30:00'),

-- Book 103: Emotional Intelligence (avg 4.7)
(103, 7, 5, '2026-02-04 09:30:00'),
(103, 8, 4, '2026-02-04 10:45:00'),
(103, 11, 5, '2026-02-04 12:00:00'),

-- Book 104: Influence (avg 4.8)
(104, 12, 5, '2026-02-04 09:45:00'),
(104, 1, 5, '2026-02-04 11:00:00'),
(104, 2, 4, '2026-02-04 12:15:00'),

-- Book 105: Good to Great (avg 4.7)
(105, 3, 5, '2026-02-04 10:00:00'),
(105, 7, 4, '2026-02-04 11:15:00'),
(105, 8, 5, '2026-02-04 12:30:00'),

-- Book 106: Psychology of Money (avg 4.8)
(106, 11, 5, '2026-02-04 10:15:00'),
(106, 12, 5, '2026-02-04 11:30:00'),
(106, 1, 4, '2026-02-04 12:45:00'),

-- Book 107: Intelligent Investor (avg 4.5)
(107, 2, 5, '2026-02-04 10:30:00'),
(107, 3, 4, '2026-02-04 11:45:00'),

-- Book 108: Millionaire Next Door (avg 4.3)
(108, 7, 4, '2026-02-04 10:45:00'),
(108, 8, 5, '2026-02-04 12:00:00'),
(108, 11, 4, '2026-02-04 13:15:00'),

-- Book 109: Leaders Eat Last (avg 4.7)
(109, 12, 5, '2026-02-04 11:00:00'),
(109, 1, 4, '2026-02-04 12:15:00'),
(109, 2, 5, '2026-02-04 13:30:00'),

-- Book 110: Drive (avg 4.5)
(110, 3, 5, '2026-02-04 11:15:00'),
(110, 7, 4, '2026-02-04 12:30:00'),

-- Book 111: So Good They Can't Ignore You (avg 4.7)
(111, 8, 5, '2026-02-04 11:30:00'),
(111, 11, 4, '2026-02-04 12:45:00'),
(111, 12, 5, '2026-02-04 14:00:00'),

-- Book 112: Meditations (avg 5.0)
(112, 1, 5, '2026-02-04 11:45:00'),
(112, 2, 5, '2026-02-04 13:00:00'),
(112, 3, 5, '2026-02-04 14:15:00'),

-- Book 113: Four Agreements (avg 4.7)
(113, 7, 5, '2026-02-04 12:00:00'),
(113, 8, 4, '2026-02-04 13:15:00'),
(113, 11, 5, '2026-02-04 14:30:00'),

-- Book 115: Sapiens (avg 4.8)
(115, 12, 5, '2026-02-04 12:15:00'),
(115, 1, 5, '2026-02-04 13:30:00'),
(115, 2, 4, '2026-02-04 14:45:00'),

-- Book 116: Homo Deus (avg 4.7)
(116, 3, 5, '2026-02-04 12:30:00'),
(116, 7, 4, '2026-02-04 13:45:00'),
(116, 8, 5, '2026-02-04 15:00:00'),

-- Book 117: Brief History of Time (avg 4.5)
(117, 11, 5, '2026-02-04 12:45:00'),
(117, 12, 4, '2026-02-04 14:00:00'),

-- Book 118: Educated (avg 4.8)
(118, 1, 5, '2026-02-04 13:00:00'),
(118, 2, 5, '2026-02-04 14:15:00'),
(118, 3, 4, '2026-02-04 15:30:00'),

-- Book 119: To Kill a Mockingbird (avg 5.0)
(119, 7, 5, '2026-02-04 13:15:00'),
(119, 8, 5, '2026-02-04 14:30:00'),
(119, 11, 5, '2026-02-04 15:45:00'),

-- Book 121: Ego is the Enemy (avg 4.7)
(121, 12, 5, '2026-02-04 13:30:00'),
(121, 1, 4, '2026-02-04 14:45:00'),
(121, 2, 5, '2026-02-04 16:00:00'),

-- Book 122: Universe Has Your Back (avg 4.3)
(122, 3, 4, '2026-02-04 13:45:00'),
(122, 7, 5, '2026-02-04 15:00:00'),
(122, 8, 4, '2026-02-04 16:15:00'),

-- Book 123: 4-Hour Body (avg 4.0)
(123, 11, 4, '2026-02-04 14:00:00'),
(123, 12, 4, '2026-02-04 15:15:00'),

-- Book 124: Big Magic (avg 4.7)
(124, 1, 5, '2026-02-04 14:15:00'),
(124, 2, 4, '2026-02-04 15:30:00'),
(124, 3, 5, '2026-02-04 16:45:00'),

-- Book 223: Power of Subconscious Mind (avg 4.5)
(223, 7, 5, '2026-02-04 14:30:00'),
(223, 8, 4, '2026-02-04 15:45:00'),

-- Book 224: 7 Habits (avg 4.8)
(224, 11, 5, '2026-02-04 14:45:00'),
(224, 12, 5, '2026-02-04 16:00:00'),
(224, 1, 4, '2026-02-04 17:15:00'),

-- Book 225: 5 AM Club (avg 4.7)
(225, 2, 5, '2026-02-04 15:00:00'),
(225, 3, 4, '2026-02-04 16:15:00'),
(225, 7, 5, '2026-02-04 17:30:00'),

-- Book 226: Meditations (duplicate, avg 4.8)
(226, 8, 5, '2026-02-04 15:15:00'),
(226, 11, 5, '2026-02-04 16:30:00'),
(226, 12, 4, '2026-02-04 17:45:00'),

-- Book 227: Ikigai (duplicate, avg 4.7)
(227, 1, 5, '2026-02-04 15:30:00'),
(227, 2, 4, '2026-02-04 16:45:00'),
(227, 3, 5, '2026-02-04 18:00:00'),

-- Book 228: Ego is the Enemy (duplicate, avg 4.5)
(228, 7, 5, '2026-02-04 15:45:00'),
(228, 8, 4, '2026-02-04 17:00:00'),

-- Book 231: Design Patterns (avg 4.8)
(231, 11, 5, '2026-02-04 16:00:00'),
(231, 12, 5, '2026-02-04 17:15:00'),
(231, 1, 4, '2026-02-04 18:30:00'),

-- Book 232: C Programming Language (avg 4.7)
(232, 2, 5, '2026-02-04 16:15:00'),
(232, 3, 4, '2026-02-04 17:30:00'),
(232, 7, 5, '2026-02-04 18:45:00'),

-- Book 233: Introduction to Algorithms (avg 4.8)
(233, 8, 5, '2026-02-04 16:30:00'),
(233, 11, 5, '2026-02-04 17:45:00'),
(233, 12, 4, '2026-02-04 19:00:00'),

-- Book 235: Percy Jackson (avg 4.5)
(235, 1, 5, '2026-02-04 16:45:00'),
(235, 3, 4, '2026-02-04 18:00:00'),

-- Book 236: Lost Hero (avg 4.7)
(236, 7, 5, '2026-02-04 17:00:00'),
(236, 8, 4, '2026-02-04 18:15:00'),
(236, 11, 5, '2026-02-04 19:30:00'),

-- Book 237: Diary of Wimpy Kid (avg 4.3)
(237, 12, 4, '2026-02-04 17:15:00'),
(237, 1, 5, '2026-02-04 18:30:00'),
(237, 2, 4, '2026-02-04 19:45:00'),

-- Book 239: Fellowship of the Ring (avg 5.0)
(239, 3, 5, '2026-02-04 17:30:00'),
(239, 7, 5, '2026-02-04 18:45:00'),
(239, 8, 5, '2026-02-04 20:00:00'),

-- Book 240: Lion Witch Wardrobe (avg 4.7)
(240, 11, 5, '2026-02-04 17:45:00'),
(240, 12, 4, '2026-02-04 19:00:00'),
(240, 1, 5, '2026-02-04 20:15:00'),

-- Book 241: Hunger Games (avg 4.8)
(241, 2, 5, '2026-02-04 18:00:00'),
(241, 3, 5, '2026-02-04 19:15:00'),
(241, 7, 4, '2026-02-04 20:30:00'),

-- Book 242: Maze Runner (avg 4.5)
(242, 8, 5, '2026-02-04 18:15:00'),
(242, 11, 4, '2026-02-04 19:30:00'),

-- Book 243: Red Pyramid (avg 4.7)
(243, 12, 5, '2026-02-04 18:30:00'),
(243, 1, 4, '2026-02-04 19:45:00'),
(243, 2, 5, '2026-02-04 21:00:00'),

-- Book 254: Superintelligence (avg 4.5)
(254, 3, 5, '2026-02-04 18:45:00'),
(254, 7, 4, '2026-02-04 20:00:00'),

-- Book 255: Life 3.0 (avg 4.7)
(255, 8, 5, '2026-02-04 19:00:00'),
(255, 11, 4, '2026-02-04 20:15:00'),
(255, 12, 5, '2026-02-04 21:30:00'),

-- Book 256: Human Compatible (avg 4.8)
(256, 1, 5, '2026-02-04 19:15:00'),
(256, 2, 5, '2026-02-04 20:30:00'),
(256, 3, 4, '2026-02-04 21:45:00'),

-- Book 257: I Robot (avg 4.7)
(257, 7, 5, '2026-02-04 19:30:00'),
(257, 8, 4, '2026-02-04 20:45:00'),
(257, 11, 5, '2026-02-04 22:00:00'),

-- Book 258: Neuromancer (avg 4.3)
(258, 12, 4, '2026-02-04 19:45:00'),
(258, 1, 5, '2026-02-04 21:00:00'),
(258, 2, 4, '2026-02-04 22:15:00'),

-- Book 260: Diamond Age (avg 4.5)
(260, 3, 5, '2026-02-04 20:00:00'),
(260, 7, 4, '2026-02-04 21:15:00'),

-- Book 261: Ancillary Justice (avg 4.7)
(261, 8, 5, '2026-02-04 20:15:00'),
(261, 11, 4, '2026-02-04 21:30:00'),
(261, 12, 5, '2026-02-04 22:45:00'),

-- Book 262: Robopocalypse (avg 4.3)
(262, 1, 4, '2026-02-04 20:30:00'),
(262, 2, 5, '2026-02-04 21:45:00'),
(262, 3, 4, '2026-02-04 23:00:00'),

-- Book 264: SICP (avg 4.8)
(264, 7, 5, '2026-02-04 20:45:00'),
(264, 8, 5, '2026-02-04 22:00:00'),
(264, 11, 4, '2026-02-04 23:15:00'),

-- Book 265: Art of Computer Programming (avg 5.0)
(265, 12, 5, '2026-02-04 21:00:00'),
(265, 1, 5, '2026-02-04 22:15:00'),
(265, 2, 5, '2026-02-04 23:30:00'),

-- Book 266: Pragmatic Programmer (avg 4.8)
(266, 3, 5, '2026-02-04 21:15:00'),
(266, 7, 5, '2026-02-04 22:30:00'),
(266, 8, 4, '2026-02-04 23:45:00'),

-- Book 267: Code Complete (avg 4.7)
(267, 11, 5, '2026-02-04 21:30:00'),
(267, 12, 4, '2026-02-04 22:45:00'),
(267, 1, 5, '2026-02-05 00:00:00'),

-- Book 269: Problem Solving DSA Python (avg 4.5)
(269, 2, 5, '2026-02-04 21:45:00'),
(269, 3, 4, '2026-02-04 23:00:00'),

-- Book 270: GEB (avg 4.8)
(270, 7, 5, '2026-02-04 22:00:00'),
(270, 8, 5, '2026-02-04 23:15:00'),
(270, 11, 4, '2026-02-05 00:30:00'),

-- Book 271: Steve Jobs (avg 4.7)
(271, 12, 5, '2026-02-04 22:15:00'),
(271, 1, 4, '2026-02-04 23:30:00'),
(271, 2, 5, '2026-02-05 00:45:00'),

-- Book 274: Think Again (avg 4.7)
(274, 3, 5, '2026-02-04 22:30:00'),
(274, 7, 4, '2026-02-04 23:45:00'),
(274, 8, 5, '2026-02-05 01:00:00');

-- =====================================================
-- VERIFICATION: Check all books now have ratings
-- =====================================================
SELECT 
    b.book_id,
    b.title,
    COUNT(r.rating_id) as rating_count,
    ROUND(AVG(r.rating), 2) as avg_rating
FROM book_db.book_table b
LEFT JOIN bookstack.book_rating r ON b.book_id = r.book_id
GROUP BY b.book_id, b.title
HAVING rating_count = 0
ORDER BY b.book_id;

-- This query should return 0 rows (all books have ratings)

SELECT 'All books now have ratings!' as Status,
       COUNT(DISTINCT book_id) as total_books_with_ratings
FROM bookstack.book_rating;
