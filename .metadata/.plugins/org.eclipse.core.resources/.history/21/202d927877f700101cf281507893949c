package com.project.bookstack.entities;



import jakarta.persistence.*;
import java.time.LocalDate;


@Entity
@Table(name = "book_table", schema = "Bookstack")
public class Book {


	    @Id
	    @GeneratedValue(strategy = GenerationType.IDENTITY)
	    @Column(name = "book_id")
	    private Integer bookId;

	    @Column(name = "isbn")
	    private Integer isbn;

	    @Column(name = "title", length = 25)
	    private String title;

	    @Column(name = "author", length = 25)
	    private String author;

	    @Column(name = "description", columnDefinition = "TEXT")
	    private String description;

	    @Column(name = "publisher", length = 45)
	    private String publisher;

	    @Column(name = "edition")
	    private Integer edition;   // YEAR mapped as Integer

	    @Column(name = "book_category")
	    private Character bookCategory;

	    @Column(name = "action", length = 15)
	    private String action;

	    @Column(name = "action_date")
	    private LocalDate actionDate;

	    @Column(name = "number_of_copies")
	    private Integer numberOfCopies;

	    @Column(name = "number_of_copies_remaining")
	    private Integer numberOfCopiesRemaining;
	    
	    @Column(name = "book_image")
	    private String bookImage;

	    /* ------------------ Relationship ------------------ */

	    @ManyToOne(fetch = FetchType.LAZY)
	    @JoinColumn(
	        name = "user_id",
	        referencedColumnName = "user_id",
	        foreignKey = @ForeignKey(name = "staff_id")
	    )
	    private Staff staff;
	    
	    @ManyToMany
	    @JoinTable(
	        name = "book_genre",
	        joinColumns = @JoinColumn(name = "book_id"),
	        inverseJoinColumns = @JoinColumn(name = "genre_id")
	    )
	    private Set<GenreEntity> genres;

}
